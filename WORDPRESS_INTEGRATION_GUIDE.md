# WordPress Integration Guide for SEO Tool

This guide explains how to integrate WordPress with your SEO tool for creating, managing, and storing blog content.

## Overview

The WordPress integration allows you to:
- Connect multiple WordPress sites
- Create and publish blog posts automatically
- Manage content from your SEO tool dashboard
- Sync content between your tool and WordPress
- Schedule posts for optimal publishing times

## Setup Instructions

### 1. WordPress Site Preparation

Before connecting your WordPress site, ensure:

1. **WordPress REST API is enabled** (enabled by default in WordPress 4.7+)
2. **Application Passwords are enabled** (WordPress 5.6+)
3. **User has appropriate permissions** (Editor or Administrator role)

### 2. Creating Application Passwords

1. Go to your WordPress admin dashboard
2. Navigate to **Users > Your Profile**
3. Scroll down to **Application Passwords** section
4. Enter a name for your application (e.g., "SEO Tool Integration")
5. Click **Add New Application Password**
6. Copy the generated password (you won't see it again)

### 3. Connecting WordPress Sites

Use the WordPress Sites API to connect your sites:

```typescript
// POST /api/wordpress/sites
{
  "name": "My Blog",
  "url": "https://myblog.com",
  "username": "your_username",
  "password": "generated_application_password"
}
```

### 4. Testing the Connection

The system automatically tests the connection when adding a site. If successful, the site will be saved to your account.

## API Endpoints

### WordPress Sites Management

#### Get All Sites
```http
GET /api/wordpress/sites
```

#### Add New Site
```http
POST /api/wordpress/sites
Content-Type: application/json

{
  "name": "Site Name",
  "url": "https://example.com",
  "username": "username",
  "password": "app_password"
}
```

#### Delete Site
```http
DELETE /api/wordpress/sites?id=site_id
```

### Blog Management

#### Get Blog Posts
```http
GET /api/wordpress/blog?siteId=site_id&per_page=10&page=1&category=category_id&search=search_term
```

#### Create Blog Post
```http
POST /api/wordpress/blog
Content-Type: application/json

{
  "siteId": "site_id",
  "title": "Post Title",
  "content": "Post content with HTML",
  "excerpt": "Short description",
  "status": "draft|publish|private|pending",
  "categories": [1, 2],
  "tags": ["tag1", "tag2"],
  "featuredImage": 123,
  "publishDate": "2024-01-15T10:00:00Z",
  "meta": {
    "custom_field": "value"
  }
}
```

#### Update Blog Post
```http
PUT /api/wordpress/blog
Content-Type: application/json

{
  "siteId": "site_id",
  "postId": 123,
  "title": "Updated Title",
  "content": "Updated content",
  "status": "publish"
}
```

#### Delete Blog Post
```http
DELETE /api/wordpress/blog?siteId=site_id&postId=post_id
```

### Publishing Content

#### Publish Generated Content
```http
POST /api/wordpress/publish
Content-Type: application/json

{
  "siteId": "site_id",
  "contentId": "content_id",
  "contentType": "content|analysis|seo_research",
  "publishOptions": {
    "status": "draft",
    "categories": [1],
    "tags": ["seo", "ai"],
    "publishDate": "2024-01-15T10:00:00Z"
  }
}
```

## WordPress API Class Usage

The `WordPressAPI` class provides comprehensive WordPress integration:

```typescript
import { WordPressAPI } from '@/lib/wordpress/api';

// Initialize with site configuration
const wpAPI = new WordPressAPI({
  id: 'site_id',
  name: 'My Blog',
  url: 'https://myblog.com',
  username: 'username',
  password: 'app_password',
  isActive: true,
  createdAt: '2024-01-01T00:00:00Z',
  updatedAt: '2024-01-01T00:00:00Z'
});

// Test connection
const isConnected = await wpAPI.testConnection();

// Create a new post
const post = await wpAPI.createPost({
  title: 'My New Post',
  content: '<p>This is the post content.</p>',
  excerpt: 'Post excerpt',
  status: 'draft',
  categories: [1],
  tags: ['seo', 'content']
});

// Get all posts
const posts = await wpAPI.getPosts({
  per_page: 10,
  page: 1,
  status: 'publish'
});

// Search posts
const searchResults = await wpAPI.searchPosts('SEO tips');

// Get categories
const categories = await wpAPI.getCategories();

// Upload media
const media = await wpAPI.uploadMedia(file, 'Alt text');

// Schedule a post
const scheduledPost = await wpAPI.schedulePost(post, '2024-01-15T10:00:00Z');
```

## Content Types Supported

### 1. Content Writer Outputs
- Blog posts generated by AI content writer
- SEO-optimized articles
- Long-form content pieces

### 2. Competitive Analysis
- Analysis reports comparing companies
- Market research content
- Industry insights

### 3. SEO Research Outputs
- Keyword research reports
- SEO strategy documents
- Technical analysis content

## Best Practices

### 1. Content Organization
- Use categories to organize content by topic
- Apply relevant tags for better discoverability
- Set appropriate post status (draft/publish)

### 2. SEO Optimization
- Include meta descriptions
- Use proper heading structure
- Add alt text to images
- Optimize for target keywords

### 3. Publishing Strategy
- Schedule posts for optimal times
- Maintain consistent publishing schedule
- Cross-promote content across platforms

### 4. Quality Control
- Review AI-generated content before publishing
- Ensure brand voice consistency
- Check for factual accuracy
- Proofread for grammar and style

## Error Handling

The integration includes comprehensive error handling:

```typescript
try {
  const post = await wpAPI.createPost(postData);
  console.log('Post created successfully:', post);
} catch (error) {
  console.error('WordPress API Error:', error.message);
  // Handle specific error cases
  if (error.message.includes('401')) {
    // Authentication failed
  } else if (error.message.includes('404')) {
    // Site not found
  }
}
```

## Security Considerations

1. **Application Passwords**: Use application passwords instead of regular passwords
2. **HTTPS Only**: Always use HTTPS for WordPress connections
3. **User Permissions**: Limit user roles to minimum required permissions
4. **Regular Updates**: Keep WordPress and plugins updated
5. **Backup Strategy**: Implement regular backups before bulk operations

## Troubleshooting

### Common Issues

1. **Connection Failed**
   - Verify WordPress URL is correct
   - Check application password is valid
   - Ensure REST API is enabled

2. **Permission Denied**
   - Verify user has Editor or Administrator role
   - Check if user can create posts manually

3. **Content Not Publishing**
   - Verify post status is set to 'publish'
   - Check WordPress site is accessible
   - Review error logs for specific issues

### Debug Mode

Enable debug mode in WordPress to see detailed error messages:

```php
// wp-config.php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

## Integration Examples

### Automated Blog Publishing

```typescript
// Automatically publish AI-generated content
const publishContent = async (contentId: string, siteId: string) => {
  const response = await fetch('/api/wordpress/publish', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      siteId,
      contentId,
      contentType: 'content',
      publishOptions: {
        status: 'publish',
        categories: [1], // SEO category
        tags: ['ai-generated', 'seo']
      }
    })
  });
  
  return response.json();
};
```

### Content Scheduling

```typescript
// Schedule multiple posts
const schedulePosts = async (posts: any[], siteId: string) => {
  const wpAPI = new WordPressAPI(siteConfig);
  
  for (let i = 0; i < posts.length; i++) {
    const publishDate = new Date();
    publishDate.setDate(publishDate.getDate() + i);
    
    await wpAPI.schedulePost(posts[i], publishDate.toISOString());
  }
};
```

## Support

For technical support or questions about WordPress integration:

1. Check the error logs in your WordPress admin
2. Review the API response messages
3. Test with a simple post creation first
4. Verify all required fields are provided

This integration provides a powerful way to manage your WordPress content directly from your SEO tool, streamlining your content creation and publishing workflow.
